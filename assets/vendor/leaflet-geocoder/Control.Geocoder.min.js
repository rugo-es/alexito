var leafletControlGeocoder=function(t,e){var o=function t(e){if(e&&e.__esModule)return e;var o=Object.create(null);return e&&Object.keys(e).forEach(function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(o,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}}),o.default=e,o}(e);function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function s(t,e){return o.Util.extend(e,t.geocodingQueryParams)}function i(t,e){return o.Util.extend(e,t.reverseQueryParams)}var r=0,a=/[&<>"'`]/g,l=/[&<>"'`]/,c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};function u(t){return c[t]}function p(t,e,n,s,i){var a="_l_geocoder_"+r++;e[i||"callback"]=a,window[a]=o.Util.bind(n,s);var l=document.createElement("script");l.type="text/javascript",l.src=t+h(e),l.id=a,document.getElementsByTagName("head")[0].appendChild(l)}function d(t,e,o){var n=new XMLHttpRequest;n.onreadystatechange=function(){var t;if(4===n.readyState){if(200!==n.status&&304!==n.status)t="";else if("string"==typeof n.response)try{t=JSON.parse(n.response)}catch(e){t=n.response}else t=n.response;o(t)}},n.open("GET",t+h(e),!0),n.responseType="json",n.setRequestHeader("Accept","application/json"),n.send(null)}function h(t,e,o){var n=[];for(var s in t){var i=encodeURIComponent(o?s.toUpperCase():s),r=t[s];if(Array.isArray(r))for(var a=0;a<r.length;a++)n.push(i+"="+encodeURIComponent(r[a]));else n.push(i+"="+encodeURIComponent(String(r)))}return(e&&-1!==e.indexOf("?")?"&":"?")+n.join("&")}var g=function(){function t(t){this.options={serviceUrl:"https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer",apiKey:""},o.Util.setOptions(this,t)}var e=t.prototype;return e.geocode=function t(e,n,i){var r=s(this.options,{token:this.options.apiKey,SingleLine:e,outFields:"Addr_Type",forStorage:!1,maxLocations:10,f:"json"});d(this.options.serviceUrl+"/findAddressCandidates",r,function(t){var e=[];if(t.candidates&&t.candidates.length)for(var s=0;s<=t.candidates.length-1;s++){var r=t.candidates[s],a=o.latLng(r.location.y,r.location.x),l=o.latLngBounds(o.latLng(r.extent.ymax,r.extent.xmax),o.latLng(r.extent.ymin,r.extent.xmin));e[s]={name:r.address,bbox:l,center:a}}n.call(i,e)})},e.suggest=function t(e,o,n){return this.geocode(e,o,n)},e.reverse=function t(e,n,s,r){var a=i(this.options,{location:e.lng+","+e.lat,distance:100,f:"json"});d(this.options.serviceUrl+"/reverseGeocode",a,function(t){var e=[];if(t&&!t.error){var n=o.latLng(t.location.y,t.location.x),i=o.latLngBounds(n,n);e.push({name:t.address.Match_addr,center:n,bbox:i})}s.call(r,e)})},t}(),f=function(){function t(t){this.options={serviceUrl:"https://dev.virtualearth.net/REST/v1/Locations"},o.Util.setOptions(this,t)}var e=t.prototype;return e.geocode=function t(e,n,i){var r=s(this.options,{query:e,key:this.options.apiKey});p(this.options.apiKey,r,function(t){var e=[];if(t.resourceSets.length>0)for(var s=t.resourceSets[0].resources.length-1;s>=0;s--){var r=t.resourceSets[0].resources[s],a=r.bbox;e[s]={name:r.name,bbox:o.latLngBounds([a[0],a[1]],[a[2],a[3]]),center:o.latLng(r.point.coordinates)}}n.call(i,e)},this,"jsonp")},e.reverse=function t(e,n,s,r){var a=i(this.options,{key:this.options.apiKey});p(this.options.serviceUrl+e.lat+","+e.lng,a,function(t){for(var e=[],n=t.resourceSets[0].resources.length-1;n>=0;n--){var i=t.resourceSets[0].resources[n],a=i.bbox;e[n]={name:i.name,bbox:o.latLngBounds([a[0],a[1]],[a[2],a[3]]),center:o.latLng(i.point.coordinates)}}s.call(r,e)},this,"jsonp")},t}(),v=function(){function t(t){this.options={serviceUrl:"https://maps.googleapis.com/maps/api/geocode/json"},o.Util.setOptions(this,t)}var e=t.prototype;return e.geocode=function t(e,n,i){var r=s(this.options,{key:this.options.apiKey,address:e});d(this.options.serviceUrl,r,function(t){var e=[];if(t.results&&t.results.length)for(var s=0;s<=t.results.length-1;s++){var r=t.results[s],a=o.latLng(r.geometry.location),l=o.latLngBounds(o.latLng(r.geometry.viewport.northeast),o.latLng(r.geometry.viewport.southwest));e[s]={name:r.formatted_address,bbox:l,center:a,properties:r.address_components}}n.call(i,e)})},e.reverse=function t(e,n,s,r){var a=i(this.options,{key:this.options.apiKey,latlng:e.lat+","+e.lng});d(this.options.serviceUrl,a,function(t){var e=[];if(t.results&&t.results.length)for(var n=0;n<=t.results.length-1;n++){var i=t.results[n],a=o.latLng(i.geometry.location),l=o.latLngBounds(o.latLng(i.geometry.viewport.northeast),o.latLng(i.geometry.viewport.southwest));e[n]={name:i.formatted_address,bbox:l,center:a,properties:i.address_components}}s.call(r,e)})},t}(),m=function(){function t(t){if(this.options={serviceUrl:"https://geocoder.api.here.com/6.2/",app_id:"",app_code:"",apiKey:"",maxResults:5},o.Util.setOptions(this,t),t.apiKey)throw Error("apiKey is not supported, use app_id/app_code instead!")}var e=t.prototype;return e.geocode=function t(e,o,n){var i=s(this.options,{searchtext:e,gen:9,app_id:this.options.app_id,app_code:this.options.app_code,jsonattributes:1,maxresults:this.options.maxResults});this.getJSON(this.options.serviceUrl+"geocode.json",i,o,n)},e.reverse=function t(e,o,n,s){var r=e.lat+","+e.lng;this.options.reverseGeocodeProxRadius&&(r+=","+this.options.reverseGeocodeProxRadius);var a=i(this.options,{prox:r,mode:"retrieveAddresses",app_id:this.options.app_id,app_code:this.options.app_code,gen:9,jsonattributes:1,maxresults:this.options.maxResults});this.getJSON(this.options.serviceUrl+"reversegeocode.json",a,n,s)},e.getJSON=function t(e,n,s,i){d(e,n,function(t){var e=[];if(t.response.view&&t.response.view.length)for(var n=0;n<=t.response.view[0].result.length-1;n++){var r=t.response.view[0].result[n].location,a=o.latLng(r.displayPosition.latitude,r.displayPosition.longitude),l=o.latLngBounds(o.latLng(r.mapView.topLeft.latitude,r.mapView.topLeft.longitude),o.latLng(r.mapView.bottomRight.latitude,r.mapView.bottomRight.longitude));e[n]={name:r.address.label,properties:r.address,bbox:l,center:a}}s.call(i,e)})},t}(),b=function(){function t(t){this.options={serviceUrl:"https://geocode.search.hereapi.com/v1",apiKey:"",app_id:"",app_code:"",maxResults:10},o.Util.setOptions(this,t)}var e=t.prototype;return e.geocode=function t(e,o,n){var i=s(this.options,{q:e,apiKey:this.options.apiKey,limit:this.options.maxResults});if(!i.at&&!i.in)throw Error("at / in parameters not found. Please define coordinates (at=latitude,longitude) or other (in) in your geocodingQueryParams.");this.getJSON(this.options.serviceUrl+"/discover",i,o,n)},e.reverse=function t(e,o,n,s){var r=i(this.options,{at:e.lat+","+e.lng,limit:this.options.reverseGeocodeProxRadius,apiKey:this.options.apiKey});this.getJSON(this.options.serviceUrl+"/revgeocode",r,n,s)},e.getJSON=function t(e,n,s,i){d(e,n,function(t){var e=[];if(t.items&&t.items.length)for(var n=0;n<=t.items.length-1;n++){var r=t.items[n],a=o.latLng(r.position.lat,r.position.lng),l=void 0;l=r.mapView?o.latLngBounds(o.latLng(r.mapView.south,r.mapView.west),o.latLng(r.mapView.north,r.mapView.east)):o.latLngBounds(o.latLng(r.position.lat,r.position.lng),o.latLng(r.position.lat,r.position.lng)),e[n]={name:r.address.label,properties:r.address,bbox:l,center:a}}s.call(i,e)})},t}();function y(t){var e;if(e=t.match(/^([NS])\s*(\d{1,3}(?:\.\d*)?)\W*([EW])\s*(\d{1,3}(?:\.\d*)?)$/))return o.latLng((/N/i.test(e[1])?1:-1)*+e[2],(/E/i.test(e[3])?1:-1)*+e[4]);if(e=t.match(/^(\d{1,3}(?:\.\d*)?)\s*([NS])\W*(\d{1,3}(?:\.\d*)?)\s*([EW])$/))return o.latLng((/N/i.test(e[2])?1:-1)*+e[1],(/E/i.test(e[4])?1:-1)*+e[3]);if(e=t.match(/^([NS])\s*(\d{1,3})°?\s*(\d{1,3}(?:\.\d*)?)?['′]?\W*([EW])\s*(\d{1,3})°?\s*(\d{1,3}(?:\.\d*)?)?['′]?$/))return o.latLng((/N/i.test(e[1])?1:-1)*(+e[2]+ +e[3]/60),(/E/i.test(e[4])?1:-1)*(+e[5]+ +e[6]/60));if(e=t.match(/^(\d{1,3})°?\s*(\d{1,3}(?:\.\d*)?)?['′]?\s*([NS])\W*(\d{1,3})°?\s*(\d{1,3}(?:\.\d*)?)?['′]?\s*([EW])$/))return o.latLng((/N/i.test(e[3])?1:-1)*(+e[1]+ +e[2]/60),(/E/i.test(e[6])?1:-1)*(+e[4]+ +e[5]/60));if(e=t.match(/^([NS])\s*(\d{1,3})°?\s*(\d{1,2})['′]?\s*(\d{1,3}(?:\.\d*)?)?["″]?\W*([EW])\s*(\d{1,3})°?\s*(\d{1,2})['′]?\s*(\d{1,3}(?:\.\d*)?)?["″]?$/))return o.latLng((/N/i.test(e[1])?1:-1)*(+e[2]+ +e[3]/60+ +e[4]/3600),(/E/i.test(e[5])?1:-1)*(+e[6]+ +e[7]/60+ +e[8]/3600));else if(e=t.match(/^(\d{1,3})°?\s*(\d{1,2})['′]?\s*(\d{1,3}(?:\.\d*)?)?["″]\s*([NS])\W*(\d{1,3})°?\s*(\d{1,2})['′]?\s*(\d{1,3}(?:\.\d*)?)?["″]?\s*([EW])$/))return o.latLng((/N/i.test(e[4])?1:-1)*(+e[1]+ +e[2]/60+ +e[3]/3600),(/E/i.test(e[8])?1:-1)*(+e[5]+ +e[6]/60+ +e[7]/3600));else if(e=t.match(/^\s*([+-]?\d+(?:\.\d*)?)\s*[\s,]\s*([+-]?\d+(?:\.\d*)?)\s*$/))return o.latLng(+e[1],+e[2])}var $=function(){function t(t){this.options={next:void 0,sizeInMeters:1e4},o.Util.setOptions(this,t)}return t.prototype.geocode=function t(e,o,n){var s=y(e);if(s){var i=[{name:e,center:s,bbox:s.toBounds(this.options.sizeInMeters)}];o.call(n,i)}else this.options.next&&this.options.next.geocode(e,o,n)},t}(),x=function(){function t(t){this.options={serviceUrl:"https://api.mapbox.com/geocoding/v5/mapbox.places/"},o.Util.setOptions(this,t)}var e=t.prototype;return e._getProperties=function t(e){for(var o={text:e.text,address:e.address},n=0;n<(e.context||[]).length;n++)o[e.context[n].id.split(".")[0]]=e.context[n].text,e.context[n].short_code&&(o.countryShortCode=e.context[n].short_code);return o},e.geocode=function t(e,n,i){var r=this,a=s(this.options,{access_token:this.options.apiKey});void 0!==a.proximity&&void 0!==a.proximity.lat&&void 0!==a.proximity.lng&&(a.proximity=a.proximity.lng+","+a.proximity.lat),d(this.options.serviceUrl+encodeURIComponent(e)+".json",a,function(t){var e=[];if(t.features&&t.features.length)for(var s=0;s<=t.features.length-1;s++){var a=t.features[s],l=o.latLng(a.center.reverse()),c=void 0;c=a.bbox?o.latLngBounds(o.latLng(a.bbox.slice(0,2).reverse()),o.latLng(a.bbox.slice(2,4).reverse())):o.latLngBounds(l,l),e[s]={name:a.place_name,bbox:c,center:l,properties:r._getProperties(a)}}n.call(i,e)})},e.suggest=function t(e,o,n){return this.geocode(e,o,n)},e.reverse=function t(e,n,s,r){var a=this,l=this.options.serviceUrl+e.lng+","+e.lat+".json",c=i(this.options,{access_token:this.options.apiKey});d(l,c,function(t){var e=[];if(t.features&&t.features.length)for(var n=0;n<=t.features.length-1;n++){var i=t.features[n],l=o.latLng(i.center.reverse()),c=void 0;c=i.bbox?o.latLngBounds(o.latLng(i.bbox.slice(0,2).reverse()),o.latLng(i.bbox.slice(2,4).reverse())):o.latLngBounds(l,l),e[n]={name:i.place_name,bbox:c,center:l,properties:a._getProperties(i)}}s.call(r,e)})},t}(),U=function(){function t(t){this.options={serviceUrl:"https://www.mapquestapi.com/geocoding/v1"},o.Util.setOptions(this,t),this.options.apiKey=decodeURIComponent(this.options.apiKey)}var e=t.prototype;return e._formatName=function t(){return[].slice.call(arguments).filter(function(t){return!!t}).join(", ")},e.geocode=function t(e,n,i){var r=s(this.options,{key:this.options.apiKey,location:e,limit:5,outFormat:"json"});d(this.options.serviceUrl+"/address",r,o.Util.bind(function(t){var e=[];if(t.results&&t.results[0].locations)for(var s=t.results[0].locations.length-1;s>=0;s--){var r=t.results[0].locations[s],a=o.latLng(r.latLng);e[s]={name:this._formatName(r.street,r.adminArea4,r.adminArea3,r.adminArea1),bbox:o.latLngBounds(a,a),center:a}}n.call(i,e)},this))},e.reverse=function t(e,n,s,r){var a=i(this.options,{key:this.options.apiKey,location:e.lat+","+e.lng,outputFormat:"json"});d(this.options.serviceUrl+"/reverse",a,o.Util.bind(function(t){var e=[];if(t.results&&t.results[0].locations)for(var n=t.results[0].locations.length-1;n>=0;n--){var i=t.results[0].locations[n],a=o.latLng(i.latLng);e[n]={name:this._formatName(i.street,i.adminArea4,i.adminArea3,i.adminArea1),bbox:o.latLngBounds(a,a),center:a}}s.call(r,e)},this))},t}(),_=function(){function t(t){this.options={userId:void 0,apiKey:void 0,serviceUrl:"https://neutrinoapi.com/"},o.Util.setOptions(this,t)}var e=t.prototype;return e.geocode=function t(e,n,i){var r=s(this.options,{apiKey:this.options.apiKey,userId:this.options.userId,address:e.split(/\s+/).join(".")});d(this.options.serviceUrl+"geocode-address",r,function(t){var e=[];if(t.locations){t.geometry=t.locations[0];var s=o.latLng(t.geometry.latitude,t.geometry.longitude),r=o.latLngBounds(s,s);e[0]={name:t.geometry.address,bbox:r,center:s}}n.call(i,e)})},e.suggest=function t(e,o,n){return this.geocode(e,o,n)},e.reverse=function t(e,n,s,r){var a=i(this.options,{apiKey:this.options.apiKey,userId:this.options.userId,latitude:e.lat,longitude:e.lng});d(this.options.serviceUrl+"geocode-reverse",a,function(t){var n=[];if(200==t.status.status&&t.found){var i=o.latLng(e.lat,e.lng),a=o.latLngBounds(i,i);n[0]={name:t.address,bbox:a,center:i}}s.call(r,n)})},t}(),w=function(){function t(t){this.options={serviceUrl:"https://nominatim.openstreetmap.org/",htmlTemplate:function t(e){var o,n,s,i=e.address,r=[];return(i.road||i.building)&&r.push("{building} {road} {house_number}"),(i.city||i.town||i.village||i.hamlet)&&r.push('<span class="'+(o=r.length>0?"leaflet-control-geocoder-address-detail":"")+'">{postcode} {city} {town} {village} {hamlet}</span>'),(i.state||i.country)&&r.push('<span class="'+(o=r.length>0?"leaflet-control-geocoder-address-context":"")+'">{state} {country}</span>'),n=r.join("<br/>"),s=i,n.replace(/\{ *([\w_]+) *\}/g,function(t,e){var o,n=s[e];return void 0===n?n="":"function"==typeof n&&(n=n(s)),null==(o=n)?"":o?(o=""+o,l.test(o))?o.replace(a,u):o:o+""})}},o.Util.setOptions(this,t||{})}var e=t.prototype;return e.geocode=function t(e,n,i){var r=this,a=s(this.options,{q:e,limit:5,format:"json",addressdetails:1});d(this.options.serviceUrl+"search",a,function(t){for(var e=[],s=t.length-1;s>=0;s--){for(var a=t[s].boundingbox,l=0;l<4;l++)a[l]=+a[l];e[s]={icon:t[s].icon,name:t[s].display_name,html:r.options.htmlTemplate?r.options.htmlTemplate(t[s]):void 0,bbox:o.latLngBounds([a[0],a[2]],[a[1],a[3]]),center:o.latLng(t[s].lat,t[s].lon),properties:t[s]}}n.call(i,e)})},e.reverse=function t(e,n,s,r){var a=this,l=i(this.options,{lat:e.lat,lon:e.lng,zoom:Math.round(Math.log(n/256)/Math.log(2)),addressdetails:1,format:"json"});d(this.options.serviceUrl+"reverse",l,function(t){var e=[];if(t&&t.lat&&t.lon){var n=o.latLng(t.lat,t.lon),i=o.latLngBounds(n,n);e.push({name:t.display_name,html:a.options.htmlTemplate?a.options.htmlTemplate(t):void 0,center:n,bbox:i,properties:t})}s.call(r,e)})},t}(),C=function(){function t(t){o.Util.setOptions(this,t)}var e=t.prototype;return e.geocode=function t(e,n,s){try{var i=this.options.OpenLocationCode.decode(e),r={name:e,center:o.latLng(i.latitudeCenter,i.longitudeCenter),bbox:o.latLngBounds(o.latLng(i.latitudeLo,i.longitudeLo),o.latLng(i.latitudeHi,i.longitudeHi))};n.call(s,[r])}catch(a){console.warn(a),n.call(s,[])}},e.reverse=function t(e,n,s,i){try{var r={name:this.options.OpenLocationCode.encode(e.lat,e.lng,this.options.codeLength),center:o.latLng(e.lat,e.lng),bbox:o.latLngBounds(o.latLng(e.lat,e.lng),o.latLng(e.lat,e.lng))};s.call(i,[r])}catch(a){console.warn(a),s.call(i,[])}},t}(),D=function(){function t(t){this.options={serviceUrl:"https://api.opencagedata.com/geocode/v1/json"},o.Util.setOptions(this,t)}var e=t.prototype;return e.geocode=function t(e,n,i){var r=s(this.options,{key:this.options.apiKey,q:e});d(this.options.serviceUrl,r,function(t){var e=[];if(t.results&&t.results.length)for(var s=0;s<t.results.length;s++){var r=t.results[s],a=o.latLng(r.geometry),l=void 0;l=r.annotations&&r.annotations.bounds?o.latLngBounds(o.latLng(r.annotations.bounds.northeast),o.latLng(r.annotations.bounds.southwest)):o.latLngBounds(a,a),e.push({name:r.formatted,bbox:l,center:a})}n.call(i,e)})},e.suggest=function t(e,o,n){return this.geocode(e,o,n)},e.reverse=function t(e,n,s,r){var a=i(this.options,{key:this.options.apiKey,q:[e.lat,e.lng].join(",")});d(this.options.serviceUrl,a,function(t){var e=[];if(t.results&&t.results.length)for(var n=0;n<t.results.length;n++){var i=t.results[n],a=o.latLng(i.geometry),l=void 0;l=i.annotations&&i.annotations.bounds?o.latLngBounds(o.latLng(i.annotations.bounds.northeast),o.latLng(i.annotations.bounds.southwest)):o.latLngBounds(a,a),e.push({name:i.formatted,bbox:l,center:a})}s.call(r,e)})},t}(),k=function(){function t(t){this.options={serviceUrl:"https://api.geocode.earth/v1"},this._lastSuggest=0,o.Util.setOptions(this,t)}var e=t.prototype;return e.geocode=function t(e,o,n){var i=this,r=s(this.options,{api_key:this.options.apiKey,text:e});d(this.options.serviceUrl+"/search",r,function(t){o.call(n,i._parseResults(t,"bbox"))})},e.suggest=function t(e,o,n){var i=this,r=s(this.options,{api_key:this.options.apiKey,text:e});d(this.options.serviceUrl+"/autocomplete",r,function(t){t.geocoding.timestamp>i._lastSuggest&&(i._lastSuggest=t.geocoding.timestamp,o.call(n,i._parseResults(t,"bbox")))})},e.reverse=function t(e,o,n,s){var r=this,a=i(this.options,{api_key:this.options.apiKey,"point.lat":e.lat,"point.lon":e.lng});d(this.options.serviceUrl+"/reverse",a,function(t){n.call(s,r._parseResults(t,"bounds"))})},e._parseResults=function t(e,n){var s=[];return o.geoJSON(e,{pointToLayer:function t(e,n){return o.circleMarker(n)},onEachFeature:function t(e,i){var r,a,l={};i.getBounds?a=(r=i.getBounds()).getCenter():i.feature.bbox?(a=i.getLatLng(),r=o.latLngBounds(o.GeoJSON.coordsToLatLng(i.feature.bbox.slice(0,2)),o.GeoJSON.coordsToLatLng(i.feature.bbox.slice(2,4)))):(a=i.getLatLng(),r=o.latLngBounds(a,a)),l.name=i.feature.properties.label,l.center=a,l[n]=r,l.properties=i.feature.properties,s.push(l)}}),s},t}();function E(t){return new k(t)}var B=function(t){function e(e){return t.call(this,o.Util.extend({serviceUrl:"https://api.openrouteservice.org/geocode"},e))||this}return n(e,t),e}(k),S=function(){function t(t){this.options={serviceUrl:"https://photon.komoot.io/api/",reverseUrl:"https://photon.komoot.io/reverse/",nameProperties:["name","street","suburb","hamlet","town","city","state","country"]},o.Util.setOptions(this,t)}var e=t.prototype;return e.geocode=function t(e,n,i){var r=s(this.options,{q:e});d(this.options.serviceUrl,r,o.Util.bind(function(t){n.call(i,this._decodeFeatures(t))},this))},e.suggest=function t(e,o,n){return this.geocode(e,o,n)},e.reverse=function t(e,n,s,r){var a=i(this.options,{lat:e.lat,lon:e.lng});d(this.options.reverseUrl,a,o.Util.bind(function(t){s.call(r,this._decodeFeatures(t))},this))},e._decodeFeatures=function t(e){var n=[];if(e&&e.features)for(var s=0;s<e.features.length;s++){var i=e.features[s],r=i.geometry.coordinates,a=o.latLng(r[1],r[0]),l=i.properties.extent,c=l?o.latLngBounds([l[1],l[0]],[l[3],l[2]]):o.latLngBounds(a,a);n.push({name:this._decodeFeatureName(i),html:this.options.htmlTemplate?this.options.htmlTemplate(i):void 0,center:a,bbox:c,properties:i.properties})}return n},e._decodeFeatureName=function t(e){return(this.options.nameProperties||[]).map(function(t){return e.properties[t]}).filter(function(t){return!!t}).join(", ")},t}(),K=function(){function t(t){this.options={serviceUrl:"https://api.what3words.com/v2/"},o.Util.setOptions(this,t)}var e=t.prototype;return e.geocode=function t(e,n,i){d(this.options.serviceUrl+"forward",s(this.options,{key:this.options.apiKey,addr:e.split(/\s+/).join(".")}),function(t){var e=[];if(t.geometry){var s=o.latLng(t.geometry.lat,t.geometry.lng),r=o.latLngBounds(s,s);e[0]={name:t.words,bbox:r,center:s}}n.call(i,e)})},e.suggest=function t(e,o,n){return this.geocode(e,o,n)},e.reverse=function t(e,n,s,r){d(this.options.serviceUrl+"reverse",i(this.options,{key:this.options.apiKey,coords:[e.lat,e.lng].join(",")}),function(t){var e=[];if(200==t.status.status){var n=o.latLng(t.geometry.lat,t.geometry.lng),i=o.latLngBounds(n,n);e[0]={name:t.words,bbox:i,center:n}}s.call(r,e)})},t}(),R={__proto__:null,geocodingParams:s,reverseParams:i,ArcGis:g,arcgis:function t(e){return new g(e)},Bing:f,bing:function t(e){return new f(e)},Google:v,google:function t(e){return new v(e)},HERE:m,HEREv2:b,here:function t(e){return e.apiKey?new b(e):new m(e)},parseLatLng:y,LatLng:$,latLng:function t(e){return new $(e)},Mapbox:x,mapbox:function t(e){return new x(e)},MapQuest:U,mapQuest:function t(e){return new U(e)},Neutrino:_,neutrino:function t(e){return new _(e)},Nominatim:w,nominatim:function t(e){return new w(e)},OpenLocationCode:C,openLocationCode:function t(e){return new C(e)},OpenCage:D,opencage:function t(e){return new D(e)},Pelias:k,pelias:E,GeocodeEarth:k,geocodeEarth:E,Mapzen:k,mapzen:E,Openrouteservice:B,openrouteservice:function t(e){return new B(e)},Photon:S,photon:function t(e){return new S(e)},What3Words:K,what3words:function t(e){return new K(e)}},O=function t(){};o.Util.extend(O.prototype,o.Control.prototype),o.Util.extend(O.prototype,o.Evented.prototype);var T=function(t){function e(e){var n;return(n=t.call(this,e)||this).options={showUniqueResult:!0,showResultIcons:!1,collapsed:!0,expand:"touch",position:"topright",placeholder:"Search...",errorMessage:"Nothing found.",iconLabel:"Initiate a new search",query:"",queryMinLength:1,suggestMinLength:3,suggestTimeout:250,defaultMarkGeocode:!0},n._requestCount=0,o.Util.setOptions(function t(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n),e),n.options.geocoder||(n.options.geocoder=new w),n}n(e,t);var s=e.prototype;return s.addThrobberClass=function t(){o.DomUtil.addClass(this._container,"leaflet-control-geocoder-throbber")},s.removeThrobberClass=function t(){o.DomUtil.removeClass(this._container,"leaflet-control-geocoder-throbber")},s.onAdd=function t(e){var n=this,s="leaflet-control-geocoder",i=o.DomUtil.create("div",s+" leaflet-bar"),r=o.DomUtil.create("button",s+"-icon",i),a=this._form=o.DomUtil.create("div",s+"-form",i);this._map=e,this._container=i,r.innerHTML="&nbsp;",r.type="button",r.setAttribute("aria-label",this.options.iconLabel);var l=this._input=o.DomUtil.create("input","",a);return l.type="text",l.value=this.options.query,l.placeholder=this.options.placeholder,o.DomEvent.disableClickPropagation(l),this._errorElement=o.DomUtil.create("div",s+"-form-no-error",i),this._errorElement.innerHTML=this.options.errorMessage,this._alts=o.DomUtil.create("ul",s+"-alternatives leaflet-control-geocoder-alternatives-minimized",i),o.DomEvent.disableClickPropagation(this._alts),o.DomEvent.addListener(l,"keydown",this._keydown,this),this.options.geocoder.suggest&&o.DomEvent.addListener(l,"input",this._change,this),o.DomEvent.addListener(l,"blur",function(){n.options.collapsed&&!n._preventBlurCollapse&&n._collapse(),n._preventBlurCollapse=!1}),this.options.collapsed?"click"===this.options.expand?o.DomEvent.addListener(i,"click",function(t){0===t.button&&2!==t.detail&&n._toggle()}):"touch"===this.options.expand?o.DomEvent.addListener(i,o.Browser.touch?"touchstart mousedown":"mousedown",function(t){n._toggle(),t.preventDefault(),t.stopPropagation()},this):(o.DomEvent.addListener(i,"mouseover",this._expand,this),o.DomEvent.addListener(i,"mouseout",this._collapse,this),this._map.on("movestart",this._collapse,this)):(this._expand(),o.Browser.touch?o.DomEvent.addListener(i,"touchstart",function(){return n._geocode()}):o.DomEvent.addListener(i,"click",function(){return n._geocode()})),this.options.defaultMarkGeocode&&this.on("markgeocode",this.markGeocode,this),this.on("startgeocode",this.addThrobberClass,this),this.on("finishgeocode",this.removeThrobberClass,this),this.on("startsuggest",this.addThrobberClass,this),this.on("finishsuggest",this.removeThrobberClass,this),o.DomEvent.disableClickPropagation(i),i},s.setQuery=function t(e){return this._input.value=e,this},s._geocodeResult=function t(e,n){if(!n&&this.options.showUniqueResult&&1===e.length)this._geocodeResultSelected(e[0]);else if(e.length>0){this._alts.innerHTML="",this._results=e,o.DomUtil.removeClass(this._alts,"leaflet-control-geocoder-alternatives-minimized"),o.DomUtil.addClass(this._container,"leaflet-control-geocoder-options-open");for(var s=0;s<e.length;s++)this._alts.appendChild(this._createAlt(e[s],s))}else o.DomUtil.addClass(this._container,"leaflet-control-geocoder-options-error"),o.DomUtil.addClass(this._errorElement,"leaflet-control-geocoder-error")},s.markGeocode=function t(e){var n=e.geocode;return this._map.fitBounds(n.bbox),this._geocodeMarker&&this._map.removeLayer(this._geocodeMarker),this._geocodeMarker=new o.Marker(n.center).bindPopup(n.html||n.name).addTo(this._map).openPopup(),this},s._geocode=function t(e){var o=this,n=this._input.value;if(e||!(n.length<this.options.queryMinLength)){var s=++this._requestCount,i=function t(i){s===o._requestCount&&(o.fire(e?"finishsuggest":"finishgeocode",{input:n,results:i}),o._geocodeResult(i,e))};this._lastGeocode=n,e||this._clearResults(),this.fire(e?"startsuggest":"startgeocode",{input:n}),e?this.options.geocoder.suggest(n,i):this.options.geocoder.geocode(n,i)}},s._geocodeResultSelected=function t(e){this.fire("markgeocode",{geocode:e})},s._toggle=function t(){o.DomUtil.hasClass(this._container,"leaflet-control-geocoder-expanded")?this._collapse():this._expand()},s._expand=function t(){o.DomUtil.addClass(this._container,"leaflet-control-geocoder-expanded"),this._input.select(),this.fire("expand")},s._collapse=function t(){o.DomUtil.removeClass(this._container,"leaflet-control-geocoder-expanded"),o.DomUtil.addClass(this._alts,"leaflet-control-geocoder-alternatives-minimized"),o.DomUtil.removeClass(this._errorElement,"leaflet-control-geocoder-error"),o.DomUtil.removeClass(this._container,"leaflet-control-geocoder-options-open"),o.DomUtil.removeClass(this._container,"leaflet-control-geocoder-options-error"),this._input.blur(),this.fire("collapse")},s._clearResults=function t(){o.DomUtil.addClass(this._alts,"leaflet-control-geocoder-alternatives-minimized"),this._selection=null,o.DomUtil.removeClass(this._errorElement,"leaflet-control-geocoder-error"),o.DomUtil.removeClass(this._container,"leaflet-control-geocoder-options-open"),o.DomUtil.removeClass(this._container,"leaflet-control-geocoder-options-error")},s._createAlt=function t(e,n){var s=this,i=o.DomUtil.create("li",""),r=o.DomUtil.create("a","",i),a=this.options.showResultIcons&&e.icon?o.DomUtil.create("img","",r):null,l=e.html?void 0:document.createTextNode(e.name),c=function t(n){s._preventBlurCollapse=!0,o.DomEvent.stop(n),s._geocodeResultSelected(e),o.DomEvent.on(i,"click touchend",function(){s.options.collapsed?s._collapse():s._clearResults()})};return a&&(a.src=e.icon),i.setAttribute("data-result-index",String(n)),e.html?r.innerHTML=r.innerHTML+e.html:l&&r.appendChild(l),o.DomEvent.addListener(i,"mousedown touchstart",c,this),i},s._keydown=function t(e){var n=this,s=function t(e){n._selection&&(o.DomUtil.removeClass(n._selection,"leaflet-control-geocoder-selected"),n._selection=n._selection[e>0?"nextSibling":"previousSibling"]),n._selection||(n._selection=n._alts[e>0?"firstChild":"lastChild"]),n._selection&&o.DomUtil.addClass(n._selection,"leaflet-control-geocoder-selected")};switch(e.keyCode){case 27:this.options.collapsed?this._collapse():this._clearResults();break;case 38:s(-1);break;case 40:s(1);break;case 13:if(this._selection){var i=parseInt(this._selection.getAttribute("data-result-index"),10);this._geocodeResultSelected(this._results[i]),this._clearResults()}else this._geocode();break;default:return}o.DomEvent.preventDefault(e)},s._change=function t(){var e=this,o=this._input.value;o!==this._lastGeocode&&(clearTimeout(this._suggestTimeout),o.length>=this.options.suggestMinLength?this._suggestTimeout=setTimeout(function(){return e._geocode(!0)},this.options.suggestTimeout):this._clearResults())},e}(O);function N(t){return new T(t)}return o.Util.extend(T,R),o.Util.extend(o.Control,{Geocoder:T,geocoder:N}),t.Geocoder=T,t.default=T,t.geocoder=N,t.geocoders=R,t}({},L);